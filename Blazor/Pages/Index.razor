@page "/"
@using TicTacToe.ViewModels
@using TicTacToe.Models

@code
{
    static readonly Player Player1 = new Player(1, Player.PlayerType.Human, "Player 1", "X");
    static readonly Player Player2 = new Player(2, Player.PlayerType.Robot, "Player 2", "O");

    readonly GameViewModel _gameViewModel = new GameViewModel(Player1, Player2);
}

<h1 hidden="@_gameViewModel.GameFinished">Let's play a game!</h1>

<h3 hidden="@_gameViewModel.GameFinished">@_gameViewModel.Game.ActivePlayer.Name - please select tile</h3>

<h1 hidden="@_gameViewModel.HasWinner.Equals(false)">Winner: @_gameViewModel.Winner?.Name</h1>

<h1 hidden="@_gameViewModel.IsTie.Equals(false)">Tie Game!</h1>

<div id="board">
    <table>
        <tr id="row1">
            <td class="square" @onclick="() => _gameViewModel.Game.PlayGame(0)">@_gameViewModel.Game.Board.Tiles[0].Player?.Token</td>
            <td class="square v" @onclick="() => _gameViewModel.Game.PlayGame(1)">@_gameViewModel.Game.Board.Tiles[1].Player?.Token</td>
            <td class="square" @onclick="() => _gameViewModel.Game.PlayGame(2)">@_gameViewModel.Game.Board.Tiles[2].Player?.Token</td>
        </tr>
        <tr id="row2">
            <td class="square h" @onclick="() => _gameViewModel.Game.PlayGame(3)">@_gameViewModel.Game.Board.Tiles[3].Player?.Token</td>
            <td class="square v h" @onclick="() => _gameViewModel.Game.PlayGame(4)">@_gameViewModel.Game.Board.Tiles[4].Player?.Token</td>
            <td class="square h" @onclick="() => _gameViewModel.Game.PlayGame(5)">@_gameViewModel.Game.Board.Tiles[5].Player?.Token</td>
        </tr>
        <tr id="row3">
            <td class="square" @onclick="() => _gameViewModel.Game.PlayGame(6)">@_gameViewModel.Game.Board.Tiles[6].Player?.Token</td>
            <td class="square v" @onclick="() => _gameViewModel.Game.PlayGame(7)">@_gameViewModel.Game.Board.Tiles[7].Player?.Token</td>
            <td class="square" @onclick="() => _gameViewModel.Game.PlayGame(8)">@_gameViewModel.Game.Board.Tiles[8].Player?.Token</td>
        </tr>
    </table>
</div>

<style>
    .square{
            width:200px;
            height:200px;
        }
    
        .v{
            border-left:1px solid #000;
            border-right:1px solid #000;
        }
    
        .h{
            border-top:1px solid #000;
            border-bottom:1px solid #000;
        }
</style>